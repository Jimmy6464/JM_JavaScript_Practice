<!DOCTYPE html>
<html>
<head>
	<title>æ­£åˆ™çš„æ‰©å±•</title>
	<meta charset="utf-8">
</head>
<body>
	<script type="text/javascript">
		/*
		RegExpæ„é€ å‡½æ•° 
		*/
		function fun1() {
			//åœ¨ES5ä¸­ï¼ŒRegExpæ„é€ å‡½æ•°çš„å‚æ•°æœ‰ä¸¤ç§æƒ…å†µã€‚
		//ç¬¬ä¸€ç§æƒ…å†µæ˜¯ï¼Œå‚æ•°æ˜¯å­—ç¬¦ä¸²ï¼Œè¿™æ—¶ç¬¬äºŒä¸ªå‚æ•°è¡¨ç¤ºæ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ï¼ˆflagï¼‰ã€‚
		var regex1 = new RegExp('xyz', 'i');
		// ç­‰ä»·äº
		var regex2 = /xyz/i;

		//ç¬¬äºŒç§æƒ…å†µæ˜¯ï¼Œå‚æ•°æ˜¯ä¸€ä¸ªæ­£åˆ™è¡¨ç¤ºå¼ï¼Œè¿™æ—¶ä¼šè¿”å›ä¸€ä¸ªåŸæœ‰æ­£åˆ™è¡¨è¾¾å¼çš„æ‹·è´ã€‚
		var regex1 = new RegExp(/xyz/i);
		// ç­‰ä»·äº
		var regex2 = /xyz/i;

		}

		/*
			å­—ç¬¦ä¸²çš„æ­£åˆ™æ–¹æ³• 
			å­—ç¬¦ä¸²å¯¹è±¡å…±æœ‰4ä¸ªæ–¹æ³•ï¼Œå¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼šmatch()ã€replace()ã€search()å’Œsplit()ã€‚

			ES6å°†è¿™4ä¸ªæ–¹æ³•ï¼Œåœ¨è¯­è¨€å†…éƒ¨å…¨éƒ¨è°ƒç”¨RegExpçš„å®ä¾‹æ–¹æ³•ï¼Œä»è€Œåšåˆ°æ‰€æœ‰ä¸æ­£åˆ™ç›¸å…³çš„æ–¹æ³•ï¼Œå…¨éƒ½å®šä¹‰åœ¨RegExpå¯¹è±¡ä¸Šã€‚

			String.prototype.match è°ƒç”¨ RegExp.prototype[Symbol.match]
			String.prototype.replace è°ƒç”¨ RegExp.prototype[Symbol.replace]
			String.prototype.search è°ƒç”¨ RegExp.prototype[Symbol.search]
			String.prototype.split è°ƒç”¨ RegExp.prototype[Symbol.split]
		*/

		/*
			uä¿®é¥°ç¬¦ :ï¼Œå«ä¹‰ä¸ºâ€œUnicodeæ¨¡å¼â€ï¼Œç”¨æ¥æ­£ç¡®å¤„ç†å¤§äº\uFFFFçš„Unicodeå­—ç¬¦ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œä¼šæ­£ç¡®å¤„ç†å››ä¸ªå­—èŠ‚çš„UTF-16ç¼–ç ã€‚
		*/
		function fun2() {
			/^\uD83D/u.test('\uD83D\uDC2A');
			// false
			/^\uD83D/.test('\uD83D\uDC2A');
			// true

			//ï¼ˆ1ï¼‰ç‚¹å­—ç¬¦
			//ç‚¹ï¼ˆ.ï¼‰å­—ç¬¦åœ¨æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œå«ä¹‰æ˜¯é™¤äº†æ¢è¡Œç¬¦ä»¥å¤–çš„ä»»æ„å•ä¸ªå­—ç¬¦ã€‚å¯¹äºç ç‚¹å¤§äº0xFFFFçš„Unicodeå­—ç¬¦ï¼Œç‚¹å­—ç¬¦ä¸èƒ½è¯†åˆ«ï¼Œå¿…é¡»åŠ ä¸Šuä¿®é¥°ç¬¦ã€‚
			var s = 'ğ ®·';

			/^.$/.test(s); // false
			/^.$/u.test(s); // true
			//ä¸Šé¢ä»£ç è¡¨ç¤ºï¼Œå¦‚æœä¸æ·»åŠ uä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼å°±ä¼šè®¤ä¸ºå­—ç¬¦ä¸²ä¸ºä¸¤ä¸ªå­—ç¬¦ï¼Œä»è€ŒåŒ¹é…å¤±è´¥ã€‚

			//ï¼ˆ2ï¼‰Unicodeå­—ç¬¦è¡¨ç¤ºæ³•
			/\u{61}/.test('a'); // false
			/\u{61}/u.test('a'); // true
			/\u{20BB7}/u.test('ğ ®·'); // true

			//ï¼ˆ3ï¼‰é‡è¯
			/a{2}/.test('aa'); // true
			/a{2}/u.test('aa'); // true
			/ğ ®·{2}/.test('ğ ®·ğ ®·'); // false
			/ğ ®·{2}/u.test('ğ ®·ğ ®·'); // true

			/^\u{3}$/.test('uuu'); // true
			//ä¸Šé¢ä»£ç ä¸­ï¼Œç”±äºæ­£åˆ™è¡¨è¾¾å¼æ²¡æœ‰uä¿®é¥°ç¬¦ï¼Œæ‰€ä»¥å¤§æ‹¬å·è¢«è§£è¯»ä¸ºé‡è¯ã€‚åŠ ä¸Šuä¿®é¥°ç¬¦ï¼Œå°±ä¼šè¢«è§£è¯»ä¸ºUnicodeè¡¨è¾¾å¼ã€‚

			//4ï¼‰é¢„å®šä¹‰æ¨¡å¼
			/^\S$/.test('ğ ®·'); // false
			/^\S$/u.test('ğ ®·'); // true
			//ä¸Šé¢ä»£ç çš„\Sæ˜¯é¢„å®šä¹‰æ¨¡å¼ï¼ŒåŒ¹é…æ‰€æœ‰ä¸æ˜¯ç©ºæ ¼çš„å­—ç¬¦ã€‚åªæœ‰åŠ äº†uä¿®é¥°ç¬¦ï¼Œå®ƒæ‰èƒ½æ­£ç¡®åŒ¹é…ç ç‚¹å¤§äº0xFFFFçš„Unicodeå­—ç¬¦ã€‚

			function codePointLength(text) {
				var result = text.match(/[\s\S]/gu);
				return result ? result.length : 0;
			}
			var str = 'ğ ®·';
			console.log(str.length);//2
			console.log(codePointLength(str));//1

			//ï¼ˆ5ï¼‰iä¿®é¥°ç¬¦
			//æœ‰äº›Unicodeå­—ç¬¦çš„ç¼–ç ä¸åŒï¼Œä½†æ˜¯å­—å‹å¾ˆç›¸è¿‘ï¼Œæ¯”å¦‚ï¼Œ\u004Bä¸\u212Aéƒ½æ˜¯å¤§å†™çš„Kã€‚
			/[a-z]/i.test('\u212A'); // false
			/[a-z]/iu.test('\u212A'); // true
			//ä¸Šé¢ä»£ç ä¸­ï¼Œä¸åŠ uä¿®é¥°ç¬¦ï¼Œå°±æ— æ³•è¯†åˆ«éè§„èŒƒçš„Kå­—ç¬¦ã€‚

		}
		fun2();

		/*
		yä¿®é¥°ç¬¦ 
		å«åšâ€œç²˜è¿â€ï¼ˆstickyï¼‰ä¿®é¥°ç¬¦ã€‚

		yä¿®é¥°ç¬¦çš„ä½œç”¨ä¸gä¿®é¥°ç¬¦ç±»ä¼¼ï¼Œä¹Ÿæ˜¯å…¨å±€åŒ¹é…ï¼Œåä¸€æ¬¡åŒ¹é…éƒ½ä»ä¸Šä¸€æ¬¡åŒ¹é…æˆåŠŸçš„ä¸‹ä¸€ä¸ªä½ç½®å¼€å§‹ã€‚ä¸åŒä¹‹å¤„åœ¨äºï¼Œgä¿®é¥°ç¬¦åªè¦å‰©ä½™ä½ç½®ä¸­å­˜åœ¨åŒ¹é…å°±å¯ï¼Œè€Œyä¿®é¥°ç¬¦ç¡®ä¿åŒ¹é…å¿…é¡»ä»å‰©ä½™çš„ç¬¬ä¸€ä¸ªä½ç½®å¼€å§‹ï¼Œè¿™ä¹Ÿå°±æ˜¯â€œç²˜è¿â€çš„æ¶µä¹‰ã€‚
		*/
		function fun3() {
			var s = 'aaa_aa_a';
			var reg1 = /a+/g;
			var reg2 = /a+/y;

			console.log(reg1.exec(s));// ["aaa", index: 0, input: "aaa_aa_a"]
			console.log(reg2.exec(s));//["aaa", index: 0, input: "aaa_aa_a"]

			console.log(reg1.exec(s));// ["aa", index: 4, input: "aaa_aa_a"]
			console.log(reg2.exec(s));//null,need to change the reg2 to '/a+_/y'

			//ä½¿ç”¨lastIndex
			const REGEX = /a/g;

			//æŒ‡å®šä»2å·ä½ç½®ï¼ˆyï¼‰å¼€å§‹åŒ¹é…
			REGEX.lastIndex = 2;

			//åŒ¹é…æˆåŠŸ
			const match = REGEX.exec('xaya');

			//åœ¨3å·ä½ç½®åŒ¹é…æˆåŠŸ
			console.log(match.index);//3

			//ä¸‹ä¸€æ¬¡åŒ¹é…ä»4å·ä½å¼€å§‹
			console.log('lastIndex :' + REGEX.lastIndex );

			//4å·ä½å¼€å§‹åŒ¹é…å¤±è´¥
			REGEX.exec('xaya');

			/b/y.exec('aba')// null
			//ä¸Šé¢ä»£ç ç”±äºä¸èƒ½ä¿è¯å¤´éƒ¨åŒ¹é…ï¼Œæ‰€ä»¥è¿”å›nullã€‚yä¿®é¥°ç¬¦çš„è®¾è®¡æœ¬æ„ï¼Œå°±æ˜¯è®©å¤´éƒ¨åŒ¹é…çš„æ ‡å¿—^åœ¨å…¨å±€åŒ¹é…ä¸­éƒ½æœ‰æ•ˆã€‚
			// æ²¡æœ‰æ‰¾åˆ°åŒ¹é…
			'x##'.split(/#/y);
			// [ 'x##' ]

			// æ‰¾åˆ°ä¸¤ä¸ªåŒ¹é…
			var txt = '##x#'.split(/#/y);
			// [ '', '', 'x#' ]
			console.log(txt);

			const REGEX1 = /a/gy;
			var txt2 = 'aaxa'.replace(REGEX1, '-') // '--xa'
			console.log(txt2);
			//ä¸Šé¢ä»£ç ä¸­ï¼Œæœ€åä¸€ä¸ªaå› ä¸ºä¸æ˜¯å‡ºç°ä¸‹ä¸€æ¬¡åŒ¹é…çš„å¤´éƒ¨ï¼Œæ‰€ä»¥ä¸ä¼šè¢«æ›¿æ¢ã€‚
			'a1a2a3'.match(/a\d/y) // ["a1"]
			'a1a2a3'.match(/a\d/gy) // ["a1", "a2", "a3"]
			//å•å•ä¸€ä¸ªyä¿®é¥°ç¬¦å¯¹matchæ–¹æ³•ï¼Œåªèƒ½è¿”å›ç¬¬ä¸€ä¸ªåŒ¹é…ï¼Œå¿…é¡»ä¸gä¿®é¥°ç¬¦è”ç”¨ï¼Œæ‰èƒ½è¿”å›æ‰€æœ‰åŒ¹é…ã€‚

			const TOKEN_Y = /\s*(\+|[0-9]+)\s*/y;
			const TOKEN_G = /\s*(\+|[0-9]+)\s*/g;
			tokenize(TOKEN_Y, '3 + 4')
			// [ '3', '+', '4' ]
			tokenize(TOKEN_G, '3 + 4')
			// [ '3', '+', '4' ]

			function tokenize(TOKEN_REGEX, str) {
			  let result = [];
			  let match;
			  while (match = TOKEN_REGEX.exec(str)) {
			    result.push(match[1]);
			  }
			  return result;
			}

			tokenize(TOKEN_Y, '3x + 4')
			// [ '3' ]
			tokenize(TOKEN_G, '3x + 4')
			// [ '3', '+', '4' ]

			//ä¸Šé¢ä»£ç ä¸­ï¼Œgä¿®é¥°ç¬¦ä¼šå¿½ç•¥éæ³•å­—ç¬¦ï¼Œè€Œyä¿®é¥°ç¬¦ä¸ä¼šï¼Œè¿™æ ·å°±å¾ˆå®¹æ˜“å‘ç°é”™è¯¯
		}
		fun3();

		/*stickyå±æ€§ è¡¨ç¤ºæ˜¯å¦è®¾ç½®äº†yä¿®é¥°ç¬¦ã€‚*/
		/*flagså±æ€§ ä¼šè¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦ã€‚*/
		function fun4() {
			var r =  /hello\d/y;
			console.log(r.sticky);

			// ES5çš„sourceå±æ€§
			// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„æ­£æ–‡
			/abc/ig.source
			// "abc"

			// ES6çš„flagså±æ€§
			// è¿”å›æ­£åˆ™è¡¨è¾¾å¼çš„ä¿®é¥°ç¬¦
			/abc/ig.flags
			// 'gi'
		}
		fun4();

		/*
		RegExp.escape() 
		*/
		function fun5() {
			function escapeRegExp(str) {
			  return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g, '\\$&');
			}

			let str = '/path/to/resource.html?search=query';
			escapeRegExp(str)
			// "\/path\/to\/resource\.html\?search=query"

			RegExp.escape('The Quick Brown Fox');
			// "The Quick Brown Fox"

			RegExp.escape('Buy it. use it. break it. fix it.');
			// "Buy it\. use it\. break it\. fix it\."

			RegExp.escape('(*.*)');
			// "\(\*\.\*\)"

			//å­—ç¬¦ä¸²è½¬ä¹‰ä»¥åï¼Œå¯ä»¥ä½¿ç”¨RegExpæ„é€ å‡½æ•°ç”Ÿæˆæ­£åˆ™æ¨¡å¼ã€‚
			var str = 'hello. how are you?';
			var regex = new RegExp(RegExp.escape(str), 'g');
			assert.equal(String(regex), '/hello\. how are you\?/g');

		}
		//åè¡Œæ–­è¨€ 
		function fun6() {
			//å…ˆè¡Œæ–­è¨€
			/\d+(?=%)/.exec('100% of US presidents have been male');  // ["100"]
			/\d+(?!%)/.exec('thatâ€™s all 44 of them');                 // ["44"]
			//ä¸Šé¢ä¸¤ä¸ªå­—ç¬¦ä¸²ï¼Œå¦‚æœäº’æ¢æ­£åˆ™è¡¨è¾¾å¼ï¼Œå°±ä¼šåŒ¹é…å¤±è´¥ã€‚å¦å¤–ï¼Œè¿˜å¯ä»¥çœ‹åˆ°ï¼Œâ€å…ˆè¡Œæ–­è¨€â€œæ‹¬å·ä¹‹ä¸­çš„éƒ¨åˆ†ï¼ˆ(?=%)ï¼‰ï¼Œæ˜¯ä¸è®¡å…¥è¿”å›ç»“æœçš„ã€‚

			/(?<=\$)\d+/.exec('Benjamin Franklin is on the $100 bill');  // ["100"]
			/(?<!\$)\d+/.exec('itâ€™s is worth about â‚¬90');                // ["90"]

			/(?<=(\d+)(\d+))$/.exec('1053'); // ["", "1", "053"]
			/^(\d+)(\d+)$/.exec('1053'); // ["1053", "105", "3"]
			//ä¸Šé¢ä»£ç ä¸­ï¼Œéœ€è¦æ•æ‰ä¸¤ä¸ªç»„åŒ¹é…ã€‚æ²¡æœ‰"åè¡Œæ–­è¨€"æ—¶ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬äºŒä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯105å’Œ3ã€‚è€Œ"åè¡Œæ–­è¨€"æ—¶ï¼Œç”±äºæ‰§è¡Œé¡ºåºæ˜¯ä»å³åˆ°å·¦ï¼Œç¬¬äºŒä¸ªæ‹¬å·æ˜¯è´ªå©ªæ¨¡å¼ï¼Œç¬¬ä¸€ä¸ªæ‹¬å·åªèƒ½æ•è·ä¸€ä¸ªå­—ç¬¦ï¼Œæ‰€ä»¥ç»“æœæ˜¯1å’Œ053ã€‚

			/(?<=(o)d\1)r/.exec('hodor');  // null
			/(?<=\1d(o))r/.exec('hodor');  // ["r", "o"]
			//ä¸Šé¢ä»£ç ä¸­ï¼Œå¦‚æœåè¡Œæ–­è¨€çš„åæ–œæ å¼•ç”¨ï¼ˆ\1ï¼‰æ”¾åœ¨æ‹¬å·çš„åé¢ï¼Œå°±ä¸ä¼šå¾—åˆ°åŒ¹é…ç»“æœï¼Œå¿…é¡»æ”¾åœ¨å‰é¢æ‰å¯ä»¥ã€‚
		}

		/*Unicodeå±æ€§ç±» */
		function fun7() {
			const regexGreekSymbol =  /\p{Script=Greek}/u;
			regexGreekSymbol.test('Ï€'); // u
			//ä¸Šé¢ä»£ç ä¸­ï¼Œ\p{Script=Greek}æŒ‡å®šåŒ¹é…ä¸€ä¸ªå¸Œè…Šæ–‡å­—æ¯ï¼Œæ‰€ä»¥åŒ¹é…Ï€æˆåŠŸã€‚
			// Unicodeå±æ€§ç±»è¦æŒ‡å®šå±æ€§åå’Œå±æ€§å€¼

			/*
				\p{UnicodePropertyName=UnicodePropertyValue}
				å¯¹äºæŸäº›å±æ€§ï¼Œå¯ä»¥åªå†™å±æ€§åã€‚
				\p{UnicodePropertyName}

				\P{â€¦}æ˜¯\p{â€¦}çš„åå‘åŒ¹é…ï¼Œå³åŒ¹é…ä¸æ»¡è¶³æ¡ä»¶çš„å­—ç¬¦ã€‚

				ä¸¤ç§ç±»åªå¯¹Unicodeæœ‰æ•ˆï¼Œæ‰€ä»¥ä½¿ç”¨çš„æ—¶å€™ä¸€å®šè¦åŠ ä¸Šuä¿®é¥°ç¬¦ã€‚å¦‚æœä¸åŠ uä¿®é¥°ç¬¦ï¼Œæ­£åˆ™è¡¨è¾¾å¼ä½¿ç”¨\på’Œ\Pä¼šæŠ¥é”™ï¼ŒECMAScripté¢„ç•™äº†è¿™ä¸¤ä¸ªç±»
			*/

			const regex = /^\p{Decimal_Number}+$/u;
			regex.test('ğŸğŸğŸ‘ğŸœğŸğŸğŸ©ğŸªğŸ«ğŸ¬ğŸ­ğŸ®ğŸ¯ğŸºğŸ»ğŸ¼') ;// true

			// åŒ¹é…æ‰€æœ‰æ•°å­—
			const regex = /^\p{Number}+$/u;
			regex.test('Â²Â³Â¹Â¼Â½Â¾'); // true
			regex.test('ã‰›ã‰œã‰'); // true
			regex.test('â… â…¡â…¢â…£â…¤â…¥â…¦â…§â…¨â…©â…ªâ…«'); // true

			// åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰å­—æ¯ï¼Œç­‰åŒäºUnicodeç‰ˆçš„\w
			// var r1 = [\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}];

			// // åŒ¹é…å„ç§æ–‡å­—çš„æ‰€æœ‰éå­—æ¯çš„å­—ç¬¦ï¼Œç­‰åŒäºUnicodeç‰ˆçš„\W
			// [\p{Alphabetic}\p{Mark}\p{Decimal_Number}\p{Connector_Punctuation}\p{Join_Control}];

			// åŒ¹é…æ‰€æœ‰çš„ç®­å¤´å­—ç¬¦
			const regexArrows = /^\p{Block=Arrows}+$/u;
			regexArrows.test('â†â†‘â†’â†“â†”â†•â†–â†—â†˜â†™â‡â‡â‡‘â‡’â‡“â‡”â‡•â‡–â‡—â‡˜â‡™â‡§â‡©'); // true
		}
	</script>
</body>
</html>