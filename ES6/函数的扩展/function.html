<!DOCTYPE html>
<html>
	<head></head>
	<body>
		<script type="text/javascript">
			/*
			函数参数的默认值
			*/
			//在ES6之前，不能直接为函数的参数指定默认值
			function log (x,y) {
				y = y||'world';
				console.log(x,y);
			}
			log('hello');//hello world
			log('Hello','China');//Hello China
			log('Hello','');//Hello world
			//。这种写法的缺点在于，如果参数y赋值了，但是对应的布尔值为false，则该赋值不起作用。就像上面代码的最后一行，参数y等于空字符，结果被改为默认值。
			//change exp:
			/*
			if (typeof y === 'undefined') {
			  y = 'World';
			}
			*/
			//ES6 
			function log2 (x,y='World') {
				console.log(x,y);
			}
			log('Hello'); // Hello World
			log('Hello', 'China'); // Hello China
			log('Hello', ''); // Hello

			function Point (x = 0,y = 0) {
				this.x = x;
				this.y = y;
			}
			var p = new Point();
			console.log(p);//Point {x: 0, y: 0}
			p.x = 10;
			console.log(p);//Point {x: 10, y: 0}
			//参数变量是默认声明的，所以不能用let或const再次声明。

			/*
				与解构赋值默认值结合使用
			*/
			function fun1 () {
				function foo ({x,y = 5}) {
					console.log(x,y);
				}
				foo({});//undefined 5
				foo({x:1});//1 5
				foo({x:1,y:6});//1 6
				/*foo(); TypeError: Cannot read property 'x' of undefined*/

				//上面代码使用了对象的解构赋值默认值，而没有使用函数参数的默认值。只有当函数foo的参数是一个对象时，变量x和y才会通过解构赋值而生成。如果函数foo调用时参数不是对象，变量x和y就不会生成，从而报错。如果参数对象没有y属性，y的默认值5才会生效。

				function fetch (url,{body = '',method = 'GET',headers = {}}) {
					console.log(method);
				}

				fetch('http://baidu.com',{});//GET
				//fetch('http://baidu.com');//Uncaught TypeError: Cannot match against 'undefined' or 'null'
				//上面代码中，如果函数fetch的第二个参数是一个对象，就可以为它的三个属性设置默认值。

				//上面的写法不能省略第二个参数，如果结合函数参数的默认值，就可以省略第二个参数。这时，就出现了双重默认值。
				function fetch1 (url,{method = 'GET'} = {}) {
					console.log(method);
				}
				fetch1('http://baidu.com');//GET
				//上面代码中，函数fetch没有第二个参数时，函数参数的默认值就会生效，然后才是解构赋值的默认值生效，变量method才会取到默认值GET。


				//区分以下两种写法

				//写法一
				function m1 ({x = 0,y = 0} = {}) {
					console.log(x,y);
				}

				//写法二
				function m2 ({x,y}={x:0,y:0}) {
					console.log(x,y);
				}

				//函数没参数的情况
				m1();//0 0
				m2();//0 0

				//x和y都有值的情况
				m1({x:3,y:8});//3,8
				m2({x:3,y:8});//3,8

				// x有值，y无值的情况
				m1({x: 3}) // [3, 0]
				m2({x: 3}) // [3, undefined]

				// x和y都无值的情况
				m1({}) // [0, 0];
				m2({}) // [undefined, undefined]

				m1({z: 3}) // [0, 0]
				m2({z: 3}) // [undefined, undefined]
			}
			fun1();
		</script>
	</body>
</html>